define(function(b,a,c){var d=b("./zepto");c.exports=d,function(m){function n(t,s,v,u){return Math.abs(t-s)>=Math.abs(v-u)?t-s>0?"Left":"Right":v-u>0?"Up":"Down"}function r(){e=null,j.last&&(j.el.trigger("longTap"),j={})}function h(){e&&clearTimeout(e),e=null}function l(){g&&clearTimeout(g),o&&clearTimeout(o),k&&clearTimeout(k),e&&clearTimeout(e),g=o=k=e=null,j={}}function p(s){return("touch"==s.pointerType||s.pointerType==s.MSPOINTER_TYPE_TOUCH)&&s.isPrimary}function f(t,s){return t.type=="pointer"+s||t.type.toLowerCase()=="mspointer"+s}var g,o,k,e,q,j={},i=750;m(document).ready(function(){var u,x,w,v,t=0,s=0;"MSGesture" in window&&(q=new MSGesture,q.target=document.body),m(document).bind("MSGestureEnd",function(z){var y=z.velocityX>1?"Right":z.velocityX<-1?"Left":z.velocityY>1?"Down":z.velocityY<-1?"Up":null;y&&(j.el.trigger("swipe"),j.el.trigger("swipe"+y))}).on("touchstart MSPointerDown pointerdown",function(y){(!(v=f(y,"down"))||p(y))&&(w=v?y:y.touches[0],y.touches&&1===y.touches.length&&j.x2&&(j.x2=void 0,j.y2=void 0),u=Date.now(),x=u-(j.last||u),j.el=m("tagName" in w.target?w.target:w.target.parentNode),g&&clearTimeout(g),j.x1=w.pageX,j.y1=w.pageY,x>0&&250>=x&&(j.isDoubleTap=!0),j.last=u,e=setTimeout(r,i),q&&v&&q.addPointer(y.pointerId))}).on("touchmove MSPointerMove pointermove",function(y){(!(v=f(y,"move"))||p(y))&&(w=v?y:y.touches[0],h(),j.x2=w.pageX,j.y2=w.pageY,t+=Math.abs(j.x1-j.x2),s+=Math.abs(j.y1-j.y2))}).on("touchend MSPointerUp pointerup",function(y){(!(v=f(y,"up"))||p(y))&&(h(),j.x2&&Math.abs(j.x1-j.x2)>30||j.y2&&Math.abs(j.y1-j.y2)>30?k=setTimeout(function(){j.el.trigger("swipe"),j.el.trigger("swipe"+n(j.x1,j.x2,j.y1,j.y2)),j={}},0):"last" in j&&(30>t&&30>s?o=setTimeout(function(){var z=m.Event("tap");z.cancelTouch=l,j.el.trigger(z),j.isDoubleTap?(j.el&&j.el.trigger("doubleTap"),j={}):g=setTimeout(function(){g=null,j.el&&j.el.trigger("singleTap"),j={}},250)},0):j={}),t=s=0)}).on("touchcancel MSPointerCancel pointercancel",l),m(window).on("scroll",l)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(s){m.fn[s]=function(t){return this.on(s,t)}})}(d)});